<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A Sombra de Vhaltoria - Aventura</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      text-align: left;
      position: relative; /* Adicionado para facilitar o posicionamento */
    }
    #dialogueBox {
      background-color: #34495e;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }
    #npcImage, #playerImage {
      width: 150px;
      border-radius: 10px;
      margin-right: 15px;
    }
    #dialogueText {
      flex: 1;
    }
    #optionsBox button {
      background-color: #2980b9;
      border: none;
      color: white;
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }
    #optionsBox button:hover {
      background-color: #3498db;
    }
    #itemDetails {
      background-color: #34495e;
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: none;
    }
    #statusBox {
      position: absolute; /* Alterado para 'absolute' */
      bottom: 20px; /* Alinhado à parte inferior */
      right: 20px; /* Alinhado à direita */
      background-color: #34495e;
      padding: 15px;
      border-radius: 10px;
      width: 200px;
      text-align: center;
    }
    #statusBox h3 {
      margin: 0;
      padding: 5px 0;
      font-size: 16px;
    }
    #statusBox p {
      margin: 5px 0;
      font-size: 14px;
    }
    #playerInventory {
      margin-top: 10px;
      cursor: pointer;
      color: #2980b9;
    }
  </style>
</head>
<body>
  <div id="dialogueBox">
    <img id="npcImage" src="/imgs/Tarverneiro.webp" alt="Imagem do NPC">
    <div id="dialogueText">
      <p>Você se encontra em uma taverna movimentada, onde o som das canecas de cerveja ecoa pelo salão. O taverneiro, um homem robusto com um bigode volumoso, acena para você.</p>
    </div>
  </div>

  <div id="optionsBox">
    <button onclick="nextDialogue(0)">Conversar com o taverneiro</button>
    <button onclick="nextDialogue(1)">Procurar uma mesa</button>
    <button onclick="nextDialogue(2)">Falar com um grupo de aventureiros</button>
  </div>

  <div id="itemDetails"></div>

  <div id="statusBox">
    <h3>Status do Jogador</h3>
    <img id="playerImage" src="/imgs/player.png" alt="Imagem do Jogador" width="100">
    <p id="level">Nível: 1</p>
    <p id="hp">HP: 100</p>
    <p id="sanity">Sanidade: 100</p>
    <p id="xp">XP: 0</p>
    <p id="gold">Ouro: 0</p>
    <p id="silver">Prata: 10</p>
    <p id="bronze">Bronze: 500</p>
    <p id="playerInventory" onclick="viewInventory()">Inventário: ${inventory.length} itens</p>
  </div>

  <script>
    const itemsForSale = [
      { name: 'Poção de Vida', description: 'Restaura 50 pontos de vida.', price: { bronze: 100, silver: 1, gold: 0 }, damage: 0 },
      { name: 'Poção de Mana', description: 'Restaura 30 pontos de mana.', price: { bronze: 150, silver: 1.5, gold: 0 }, damage: 0 },
      { name: 'Espada Curta', description: 'Uma arma leve e afiada, ideal para combate corpo a corpo.', price: { bronze: 200, silver: 2, gold: 0 }, damage: 5 },
      { name: 'Escudo de Madeira', description: 'Um escudo simples que oferece proteção básica.', price: { bronze: 150, silver: 1.5, gold: 0 }, damage: 0 },
      { name: 'Mapa das Ruínas', description: 'Um mapa que mostra os principais pontos das Ruínas Antigas.', price: { bronze: 250, silver: 2.5, gold: 0 }, damage: 0 },
      { name: 'Contratar Aventureiro', description: 'Um NPC que irá ajudá-lo na sua jornada.', price: { bronze: 500, silver: 5, gold: 0 }, damage: 0 },
    ];

    const inventory = [];
    let playerLevel = 1;
    let playerHP = 100;
    let playerSanity = 100;
    let playerXP = 0;
    let playerGold = 0;
    let playerSilver = 10;
    let playerBronze = 500;

    const dialogues = [
      { 
        text: 'O taverneiro sorri, limpando uma caneca com um pano já sujo. "Bem-vindo, aventureiro! O que deseja hoje? Uma bebida refrescante ou talvez histórias aterrorizantes sobre as Ruínas Antigas?"',
        options: ['Perguntar sobre as Ruínas', 'Pedir uma bebida', 'Sair da taverna'] 
      },
      { 
        text: 'Você olha ao redor e percebe uma mesa vazia no canto. Sentado ali, um homem idoso observa você atentamente. A luz fraca da lareira mal ilumina seu rosto encovado, mas você sente que ele guarda muitos segredos.',
        options: ['Ir até o homem idoso', 'Ficar onde está'] 
      },
      { 
        text: 'Você se aproxima do homem idoso, que sorri de maneira enigmática. "Vejo que você está interessado nas Ruínas. Muitos já foram, poucos retornaram. Se realmente deseja ir, precisará se preparar bem."',
        options: ['Perguntar como se preparar', 'Ignorar e sair'] 
      },
      { 
        text: '"Você vai precisar de bons equipamentos e, acima de tudo, coragem. Há criaturas sombrias nas profundezas... e algo ainda mais aterrorizante guarda um artefato antigo. Pegue este mapa e que a sorte esteja ao seu lado."', 
        options: ['Aceitar o mapa', 'Recusar educadamente']
      },
      { 
        text: 'Você aceitou o mapa das Ruínas. A jornada está prestes a começar.',
        options: ['Ver inventário', 'Ir até as Ruínas', 'Salvar jogo']
      },
    ];

    function updateStatus() {
      document.getElementById('level').textContent = `Nível: ${playerLevel}`;
      document.getElementById('hp').textContent = `HP: ${playerHP}`;
      document.getElementById('sanity').textContent = `Sanidade: ${playerSanity}`;
      document.getElementById('xp').textContent = `XP: ${playerXP}`;
      document.getElementById('gold').textContent = `Ouro: ${playerGold}`;
      document.getElementById('silver').textContent = `Prata: ${playerSilver}`;
      document.getElementById('bronze').textContent = `Bronze: ${playerBronze}`;
      document.getElementById('playerInventory').textContent = `Inventário: ${inventory.length} itens`;
    }

    function nextDialogue(index) {
      const dialogue = dialogues[index];
      document.getElementById('dialogueText').innerHTML = `<p>${dialogue.text}</p>`;
      document.getElementById('optionsBox').innerHTML = dialogue.options
        .map((option, i) => `<button onclick="nextDialogue(${index + 1 + i})">${option}</button>`)
        .join('');

      if (index === 4) { // Exibe itens à venda após a conversa com o comerciante
        displayItemsForSale();
      }
      if (index === 5) { // Exibe a opção de salvar o jogo
        displaySaveOption();
      }
    }

    function displayItemsForSale() {
      let itemsHtml = '<h3>Itens à Venda:</h3>';
      itemsForSale.forEach((item, index) => {
        itemsHtml += `<div onclick="buyItem(${index})" style="cursor: pointer;">${item.name} - ${item.price.bronze} bronze</div>`;
      });
      document.getElementById('itemDetails').innerHTML = itemsHtml;
      document.getElementById('itemDetails').style.display = 'block';
    }

    function buyItem(itemIndex) {
      const item = itemsForSale[itemIndex];
      if (playerGold >= item.price.gold && playerSilver >= item.price.silver && playerBronze >= item.price.bronze) {
        inventory.push(item);
        playerGold -= item.price.gold;
        playerSilver -= item.price.silver;
        playerBronze -= item.price.bronze;
        alert(`Você comprou: ${item.name}`);
      } else {
        alert('Moedas insuficientes para comprar este item.');
      }
      updateStatus();
    }

    function viewInventory() {
      const inventoryHtml = inventory.map(item => `<div>${item.name}</div>`).join('');
      alert(`Seu inventário:\n${inventoryHtml || 'Está vazio.'}`);
    }

    function displaySaveOption() {
      document.getElementById('optionsBox').innerHTML += '<button onclick="saveGame()">Salvar jogo</button>';
    }

    function saveGame() {
      alert('Jogo salvo com sucesso!');
      // Lógica para salvar o jogo pode ser implementada aqui
    }

    updateStatus();
  </script>
</body>
</html>
